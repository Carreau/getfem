#!/usr/bin/perl

$CC = $ENV{CC};

if (! $CC) {
print "No compiler, searching one\n";

`CC -version`;  if ($? == 0) { print "CC  detected\n"; $CC = "CC";  }
`CC -v`;  if ($? == 0) { print "CC  detected\n"; $CC = "CC";  }
`g++ -v`; if ($? == 0) { print "g++ detected\n"; $CC = "g++"; }
`cxx -V`; if ($? == 0) { print "cxx detected\n"; $CC = "cxx"; }
}

if (! $CC) { die "No compiler found, aborting\n"; }
else { print "\n\nCompiler selected : $CC\nVersion: \n\n"; } 

if ($CC =~ /CC/) {
}
elsif ($CC =~ /cxx/) {
  $rep = `cxx -V`;
  print "$rep\n";
}
elsif ($CC =~ /g\+\+/) {
  open(GNF, ">__tmpcv");
  print GNF "#!/bin/csh\n g++ -v >& __tmpcv2\nmore __tmpcv2\nrm -f __tmpcv2\n";
  close(GNF);
  `chmod +x __tmpcv`;
  $rep = `./__tmpcv`;
  `rm __tmpcv`;
  print "$rep\n";
}
else { die "Compiler unidentified\n"; }
