#!/usr/bin/perl
 

#######################################
#       System identification         #
#######################################

$rootlib = `pwd`; chomp($rootlib);
$machine = `uname -m`; chomp($machine);
$systeme = `uname -s`; chomp($systeme); $systeme .= `uname -r`;chomp($systeme);
$getfem_lib = "libgetfem.a";


#######################################
# Environnement variables for shell   #
#######################################

$ENV{PATH} = "/bin:/usr/dt/bin:.:/usr/ucb:/sbin:/usr/bin:/usr/sbin:/etc:/usr/etc:/usr/lib:/usr/ccs/bin:/usr/local/bin:/usr/local/opt/bin:/usr/bin/X11:/usr/local/opt/sbin:/usr/bin:/usr/local/bin:/usr/bin/X11:/usr/dt/bin:/usr/local/texmf/bin/alpha_osf1:opt/bin:/opt/matlab/bin:/usr/local/matlab/bin";
$ENV{SHELL} = "/usr/bin/tcsh";
if ($systeme =~ /Linux/)
{
  $ENV{SYSDEX} = "Linux";
  $make = "make";
}
else
{
  $ENV{SYSDEX} = "OSF1";
  $ENV{TEXMF} = "/usr/local/texmf";
  $ENV{TEXMFUPD} = "/usr/local";
  $ENV{LU_TEXENV} = "=1";
  $ENV{MTPK_DESTROOT} = "/usr/local/texmf/fonts";
  $ENV{MTP_MAPFILE} = "/usr/local/texmf/dvips/psfonts.map";
  $ENV{TEXMFCNF} = "/usr/local/texmf/web2c";
  $make = "gmake";
}

$ENV{CVSROOT} = ":pserver:renard\@gmmlinux2.gmm.priv:\/var\/cvs";

#######################################
#        Mise à jour                  #
#######################################

print `cd ..; cvs checkout getfem++`; print "\n\n";
print `cd ..; cvs checkout getfem_matlab`; print "\n\n";

exec "./configure --prefix=$rootlib ; $make; $make install; cd ../getfem_matlab; ./configure --prefix=$rootlib ; $make; $make install"; print "\n\n";

