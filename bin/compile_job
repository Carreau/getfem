#!/usr/bin/perl
 

#######################################
#       System identification         #
#######################################

$rootlib = `pwd`; chomp($rootlib);
$installpath = `cd ..; pwd`; chomp($installpath);
$machine = `uname -m`; chomp($machine);
$systeme = `uname -s`; chomp($systeme); $systeme .= `uname -r`;chomp($systeme);
$getfem_lib = "libgetfem.a";


#######################################
# Environnement variables for shell   #
#######################################

$ENV{PATH} = "/bin:/usr/dt/bin:.:/usr/ucb:/sbin:/usr/bin:/usr/sbin:/etc:/usr/etc:/usr/lib:/usr/ccs/bin:/usr/local/bin:/usr/local/opt/bin:/usr/bin/X11:/usr/local/opt/sbin:/usr/bin:/usr/local/bin:/usr/bin/X11:/usr/dt/bin:/usr/local/texmf/bin/alpha_osf1:opt/bin:/opt/matlab/bin:/usr/local/matlab/bin";
$ENV{SHELL} = "/usr/bin/tcsh";
if ($systeme =~ /Linux/)
{
  $ENV{SYSDEX} = "Linux";
  $make = "make";
}
else
{
  $ENV{SYSDEX} = "OSF1";
  $ENV{TEXMF} = "/usr/local/texmf";
  $ENV{TEXMFUPD} = "/usr/local";
  $ENV{LU_TEXENV} = "=1";
  $ENV{MTPK_DESTROOT} = "/usr/local/texmf/fonts";
  $ENV{MTP_MAPFILE} = "/usr/local/texmf/dvips/psfonts.map";
  $ENV{TEXMFCNF} = "/usr/local/texmf/web2c";
  $make = "gmake";
}


print `cd ..; cvs checkout getfem++`; print "\n\n";
print `touch *`;
print `touch config/*`;
print `touch src/Mak*`;
print `touch tests/Mak*`;
print `touch matlabint/Mak*`;
print `touch matlabcom/Mak*`;

open F, "./configure --prefix=$installpath |" or die;
print $_ while (<F>); close F; print "\n\n";
open F, "$make |" or die;
print $_ while (<F>); close F; print "\n\n";
open F, "$make install |" or die;
print $_ while (<F>); close F; print "\n\n";
